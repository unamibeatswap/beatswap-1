{"version":3,"file":"context.js","sources":["../../src/optimistic/context.ts"],"sourcesContent":["import {createEmptyActor, type ActorRefFrom} from 'xstate'\nimport {createDatasetMutator} from './state/datasetMutator'\n\nexport type MutatorActor = ActorRefFrom<ReturnType<typeof createDatasetMutator>>\nexport type EmptyActor = typeof emptyActor\n\nexport const emptyActor = createEmptyActor()\n\nexport let actor: MutatorActor | EmptyActor = emptyActor\n\nexport const listeners = new Set<() => void>()\n\nexport function isEmptyActor(actor: MutatorActor | EmptyActor): actor is EmptyActor {\n  return actor === emptyActor\n}\n\nexport function setActor(nextActor: MutatorActor): void {\n  actor = nextActor\n  for (const onActorChange of listeners) {\n    onActorChange()\n  }\n}\n"],"names":["emptyActor","createEmptyActor","actor","listeners","Set","isEmptyActor","setActor","nextActor","onActorChange"],"mappings":";AAMO,MAAMA,aAAaC,iBAAiB;AAEpC,IAAIC,QAAmCF;AAEjCG,MAAAA,gCAAgBC,IAAgB;AAEtC,SAASC,aAAaH,QAAuD;AAClF,SAAOA,WAAUF;AACnB;AAEO,SAASM,SAASC,WAA+B;AAC9CA,UAAAA;AACR,aAAWC,iBAAiBL;AACZ,kBAAA;AAElB;"}